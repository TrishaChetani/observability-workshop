<source>
  @type tail
  path /mnt/var/log/docker/containers/*/*-json.log
  pos_file /fluentd/etc/fluentd-docker.pos
  tag docker.*
  format json
  time_key time
  time_format %Y-%m-%dT%H:%M:%S
  emit_unmatched_lines false
</source>


<filter docker.**>
  @type parser
    <parse>
      @type json
      json_parser json
    </parse>
  replace_invalid_sequence true
  emit_invalid_record_to_error false
  key_name log
</filter>

<match docker.**>
  @type elasticsearch
  host elasticsearch
  port 9200
  index_name fluentd
  <buffer>
    flush_interval 5s
  </buffer>
</match>
